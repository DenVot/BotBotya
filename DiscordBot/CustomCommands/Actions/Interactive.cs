/*
_________________________________________________________________________
|                                                                       |
|██████╗░░█████╗░████████╗  ██████╗░░█████╗░████████╗██╗░░░██╗░█████╗░  |
|██╔══██╗██╔══██╗╚══██╔══╝  ██╔══██╗██╔══██╗╚══██╔══╝╚██╗░██╔╝██╔══██╗  |
|██████╦╝██║░░██║░░░██║░░░  ██████╦╝██║░░██║░░░██║░░░░╚████╔╝░███████║  |
|██╔══██╗██║░░██║░░░██║░░░  ██╔══██╗██║░░██║░░░██║░░░░░╚██╔╝░░██╔══██║  |
|██████╦╝╚█████╔╝░░░██║░░░  ██████╦╝╚█████╔╝░░░██║░░░░░░██║░░░██║░░██║  |
|╚═════╝░░╚════╝░░░░╚═╝░░░  ╚═════╝░░╚════╝░░░░╚═╝░░░░░░╚═╝░░░╚═╝░░╚═╝  |
|______________________________________________________________________ |
|Author: Denis Voitenko.                                                |
|GitHub: https://github.com/DenchickPenchick                            |
|DEV: https://dev.to/denchickpenchick                                   |
|_____________________________Project__________________________________ |
|GitHub: https://github.com/DenchickPenchick/BotBotya                   |
|______________________________________________________________________ |
|© Denis Voitenko                                                       |
_________________________________________________________________________
 */

using Discord.Addons.Interactive;
using Discord.Commands;
using DiscordBot.CustomCommands.Entities;
using System;
using System.Threading.Tasks;

namespace DiscordBot.CustomCommands.Actions
{
    [Serializable]
    public class Interactive : IAction<string>, IVariable<int>
    {
        private readonly SocketCommandContext context;

        public Interactive(SocketCommandContext ctx)
        {
            context = ctx;
        }

        public int Value { get; set; }

        public async Task<string> DoAction()
        {            
            var client = context.Client;
            var interactive = new InteractiveService(client);
            var message = await interactive.NextMessageAsync(context);

            if (message != null)
                return message.Content;
            return null;
        }
    }
}
